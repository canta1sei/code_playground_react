# フロントエンドアプリケーション (`frontend`)

## 概要

このディレクトリには、「ももクロ ビンゴカードジェネレーター」のユーザーインターフェースを構成するReactアプリケーションが含まれています。

## 技術スタック

- **フレームワーク**: React
- **言語**: TypeScript
- **ビルドツール**: Vite
- **スタイリング**: Tailwind CSS
- **ドラッグ＆ドロップ**: `@dnd-kit`

## 主要なコンポーネントとファイル

- **`src/App.tsx`**
    - アプリケーション全体のstate管理とロジックの中枢を担うコンポーネントです。
    - `@dnd-kit`の`DndContext`と`DragOverlay`を管理し、ドラッグ開始から終了までの一連のイベントハンドリングを行います。
    - バックエンドAPIとの通信、編集モードの切り替え、モーダルの表示制御など、主要なロジックがここに集約されています。

- **`src/BingoGrid.tsx`**
    - ビンゴカードのグリッドレイアウトを構成するコンポーネントです。
    - `App.tsx`から渡された曲データ（`songs`）を元に、`SongCard`コンポーネントをマッピングして5x5のグリッドを形成します。

- **`src/SongCard.tsx`**
    - ビンゴカードのマス一つひとつを表す、再利用可能なコンポーネントです。
    - `@dnd-kit`の`useDraggable`と`useDroppable`フックを使用し、各カードが「ドラッグ可能」かつ「ドロップ可能な領域」になるように設定されています。
    - ドラッグ中、ドロップ対象になっている最中、オーバーレイ表示中など、自身の状態に応じてスタイル（表示/非表示、エフェクト）を動的に変更する責務を持ちます。

- **`src/SongSelectionModal.tsx`**
    - カード編集時に表示される、曲選択用のモーダルコンポーネントです。
    - 全曲リストの表示、インクリメンタル検索、選択された曲の情報を`App.tsx`にコールバックする機能を持ちます。

- **`src/index.css`**
    - アプリケーションのグローバルなスタイルシートです。
    - Tailwind CSSの基本設定に加え、アイドル風デザインを実現するためのカスタムクラス（`.sparkle`, `.spotlight`など）や、レスポンシブなテキスト表示のための`.bingo-card-text-content`クラス、D&D操作を補助するスタイル（`.bingo-grid`の`touch-action`）などが定義されています。

## 主要機能

- **ビンゴカード生成**: バックエンドAPIを呼び出し、ランダムな25曲のビンゴカードを生成・表示します。

- **カード編集機能（`@dnd-kit`による刷新）**
    - **安定したD&D基盤**: 独自実装を廃止し、`@dnd-kit`ライブラリに完全移行。これにより、動作の安定性とパフォーマンスが大幅に向上しました。
    - **直感的なスワップ操作**: ドラッグしたカードはカーソルにスムーズに追従し、他のカードは移動しません。ドロップが完了した瞬間に、ドラッグ元とドロップ先のカードが入れ替わる（スワップする）直感的なUIを実現しています。
    - **リッチな視覚効果**: アイドル風のポップなデザインを取り入れ、ドラッグ中のカードには浮遊感のある影とスポットライトが当たり、ドロップ先の候補にはキラキラ光るボーダーが表示されるなど、操作が楽しくなる視覚効果を実装しました。
    - **優れたモバイル操作性**: スマートフォンでのドラッグ中に、意図せず画面全体がスクロールしてしまう問題を解決。グリッド部分のみ操作中はスクロールを無効化し、スムーズで確実な操作を可能にしました。
    - **レスポンシIVEなテキスト表示**: 長い曲名もカード内で省略されることなく、自動で折り返して表示されます。`clamp()`関数を用いたCSSにより、PCからスマホまで、あらゆる画面サイズでフォントサイズが最適化されます。

- **画像ダウンロード**: 生成・編集したビンゴカードをPNG画像としてダウンロードできます。

- **共有**: 生成されたビンゴカードをX（旧Twitter）にシェアできます。

## 開発コマンド

- `npm install`: プロジェクトの依存関係をインストールします。
- `npm run dev`: 開発サーバーを起動し、ローカルでアプリケーションをテストします。
- `npm run build`: 本番環境にデプロイするための最適化された静的ファイルを生成します。
- `npm run verify`: フロントエンドのビルドと、バックエンドAPIの疎通確認を自動で行います。